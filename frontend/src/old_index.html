<!DOCTYPE html>
<html lang="en">
<head>
	<!-- prevent text color inheritance for dashboard -->
	<style>
		#stats-dashboard * { color:#fff !important; }
	</style>	
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ft_transcendence</title>
	<link rel="icon" href="/42_favicon.ico" type="image/x-icon">
	<link href="/output.css" rel="stylesheet">
	<script src="/env-config.js"></script>
</head>
<body>
	<!-- Main Menu -->
	<main id="main-menu" class="screen">
		<header>
			<!-- Top Left corner, show server connection -->
			<div id="connection-status" class="connection-status" style="display: none;"></div>
			<!-- Top-right user info (when logged in) -->
			<div id="user-info" style="display: none;">
				<span id="user-name"></span>
				<button type="button" id="dashboard-btn" class="button secondary">Dashboard</button>
				<button type="button" id="logout-btn" class="button secondary">Logout</button>
			</div>
			<!-- Top-right auth buttons (when logged out) -->
			<div id="auth-buttons" class="auth-buttons">
				<button type="button" class="button secondary" id="login-btn">Login</button>
				<button type="button" class="button secondary" id="register-btn">Register</button>
			</div>
			
			<h1 id="main-title" class="title text-3xl font-bold text-purple-500">ft_transcendence</h1>
		</header>
		
		<nav class="button-group">
			<!-- Single PLAY button -->
			<button type="button" class="button play-button" id="play-btn">PLAY</button>
			
			<!-- Language selector -->
			<div class="selector">
				<button type="button" class="nav-button" id="back">←</button>
				<span class="selector-text" id="language_select">English</span>
				<button type="button" class="nav-button" id="forward">→</button>
			</div>
		</nav>
	</main>

	<!-- Login Modal -->
	<div id="login-modal" class="screen overlay" style="display: none;">
		<div class="container">
			<h2 class="title">Login to Play</h2>
			
			<form id="login-form">
				<fieldset>
					<div class="input-group">
						<label for="login-username" class="label">Username or Email:</label>
						<input type="text" id="login-username" name="username" class="input" 
							   placeholder="Enter username or email" required autocomplete="username">
					</div>
					
					<div class="input-group">
						<label for="login-password" class="label">Password:</label>
						<input type="password" id="login-password" name="password" class="input" 
							   placeholder="Enter password" required autocomplete="current-password">
					</div>
				</fieldset>
				
				<div class="button-group">
					<button type="submit" class="button" id="login-submit">Login</button>
					<div id="google-login-btn-container"></div>
				</div>
			</form>
			
			<div class="modal-footer">
				<p class="info-text">Don't have an account?</p>
				<button type="button" class="button secondary" id="show-register">Create Account</button>
			</div>
			
			<button type="button" class="button secondary" id="login-back">Back</button>
		</div>
	</div>

	<!-- Register Modal -->
	<div id="register-modal" class="screen overlay" style="display: none;">
		<div class="container">
			<h2 class="title">Create Account</h2>
			
			<form id="register-form">
				<fieldset>
					<div class="input-group">
						<label for="register-username" class="label">Username:</label>
						<input type="text" id="register-username" name="username" class="input" 
							   placeholder="Enter username" maxlength="20" required autocomplete="username">
					</div>
					
					<div class="input-group">
						<label for="register-email" class="label">Email:</label>
						<input type="email" id="register-email" name="email" class="input" 
							   placeholder="Enter email" required autocomplete="email">
					</div>
					
					<div class="input-group">
						<label for="register-password" class="label">Password:</label>
						<input type="password" id="register-password" name="password" class="input" 
							   placeholder="Enter password" required autocomplete="new-password">
					</div>
					
					<div class="input-group">
						<label for="register-confirm-password" class="label">Confirm Password:</label>
						<input type="password" id="register-confirm-password" name="confirm-password" class="input" 
							   placeholder="Confirm password" required autocomplete="new-password">
						<div id="google-register-btn-container" class="google-signin"></div>
					</div>
				</fieldset>

				
				<div class="button-group">
					<button type="submit" class="button" id="register-submit">Create Account</button>
				</div>
			</form>
			
			<div class="modal-footer">
				<p class="info-text">Already have an account?</p>
				<button type="button" class="button secondary" id="show-login">Login</button>
			</div>
			
			<button type="button" class="button secondary" id="register-back">Back</button>
		</div>
	</div>

	<!-- Game Mode Selection -->
	<div id="game-mode-overlay" class="screen overlay" role="dialog" aria-labelledby="mode-title">
		<div class="container">
			<h2 id="mode-title" class="title">Select Game Mode</h2>
			
			<div class="mode-selector">
				<div class="selector">
					<button type="button" class="nav-button" id="view-mode-back">←</button>
					<span class="selector-text" id="view-mode-display">Classic Mode</span>
					<button type="button" class="nav-button" id="view-mode-forward">→</button>
				</div>
			</div>

			<div class="button-group" id="mode-buttons-table">
				<div class="solo-mode-container">
					<button type="button" class="difficulty-button" id="solo-difficulty-back">◂</button>
					<button type="button" class="button solo-button-in-container" id="solo-mode">vs AI (Medium)</button>
					<button type="button" class="difficulty-button" id="solo-difficulty-forward">▸</button>
				</div>
				<button type="button" class="button" id="local-mode">Local 2 Players</button>
				<button type="button" class="button" id="online-mode">Online 2 Players</button>
				<div class="solo-mode-container">
					<button type="button" class="difficulty-button" id="tournament-number-back">◂</button>
					<button type="button" class="button tournament-button-in-container" id="tournament-mode">Tournament</button>
					<button type="button" class="difficulty-button" id="tournament-number-forward">▸</button>
				</div>
				<div class="solo-mode-container">
					<button type="button" class="difficulty-button" id="tournament-online-number-back">◂</button>
					<button type="button" class="button tournament-online-button-in-container" id="tournament-online-mode">Tournament Online</button>
					<button type="button" class="difficulty-button" id="tournament-online-number-forward">▸</button>
				</div>
				<button type="button" class="button secondary" id="mode-back">Back</button>
			</div>
		</div>
	</div>

	<!-- Player Setup -->
	<div id="player-setup-overlay" class="screen overlay" role="dialog" aria-labelledby="setup-title">
		<div class="container">
			<h2 id="setup-title" class="title">Player Setup</h2>

			<!-- Solo Player Setup -->
			<!-- <form id="solo-setup" class="setup-form">
				<fieldset>
					<div class="input-group">
						<label for="player1-name" class="label">Player Name:</label>
						<input type="text" id="player1-name" name="player1-name" class="input" 
							   placeholder="Enter your name" maxlength="20" required autocomplete="off">
					</div>
				</fieldset>
			</form> -->

			<!-- Local 2 Player Setup -->
			<!-- <form id="two-players-setup" class="setup-form">
				<fieldset>
					<div class="input-group">
						<label for="player1-name-local" class="label">Player 1 Name:</label>
						<input type="text" id="player1-name-local" name="player1-name" class="input" 
							   placeholder="Enter Player 1 name" maxlength="20" required autocomplete="off">
					</div>
					<div class="input-group">
						<label for="player2-name-local" class="label">Player 2 Name:</label>
						<input type="text" id="player2-name-local" name="player2-name" class="input" 
							   placeholder="Enter Player 2 name" maxlength="20" required autocomplete="off">
					</div>
				</fieldset>
			</form> -->

			<!-- Tournament Setup --> <!-- maybe change name -->
			<!-- <form id="tournament-setup" class="setup-form">
			<fieldset>
				<div class="input-group">
				<label id="tournament-player-label" class="label">Player 1</label>
				<input
					type="text"
					id="tournament-player-input"
					class="input"
					placeholder="Enter name"
					maxlength="20"
					autocomplete="off"
				/>
				</div>
				<p class="info-text">Tournament will be implemented in a future update</p>
			</fieldset>
			</form> -->
			<form id="player-setup" class="setup-form">
				<fieldset>
					<div class="input-group">
					<label id="player-label" class="label">Player 1</label>
					<input
						type="text"
						id="player-input"
						class="input"
						placeholder="Enter name"
						maxlength="20"
						autocomplete="off"
					/>
					</div>
				</fieldset>
			</form>

			<div class="button-group">
				<button type="button" class="button" id="start-game">Next</button>
				<button type="button" class="button secondary" id="add-cpu" disabled>Add CPU</button>
				<button type="button" class="button secondary" id="setup-back">Back</button>
			</div>
		</div>
	</div>

	<!-- Game Screens -->
	<div id="game-3d" class="screen overlay game-screen">
		<canvas id="game-canvas-3d" class="game-canvas" width="1400" height="700" 
				aria-label="3D Game Canvas" tabindex="0"></canvas>
		<div id="loading-screen" class="game-overlay">
			<div class="loading-content">
				<h2 id="loading">Loading...</h2>
				<div class="progress-bar">
					<div id="progress-fill"></div>
				</div>
				<span id="progress-text">0%</span>
			</div>
		</div>
	</div>

	<!-- Stats Dashboard -->
	<div id="stats-dashboard" class="screen overlay"
		style="display:none; flex-direction:column; align-items:center; gap:24px;">

	<!-- <h2 style="width:100%; text-align:center; margin:12px 0 4px;">User Stats</h2> -->
	 <h2 style="width:100%; text-align:center; margin:12px 0 4px; font-size:24px; font-weight:700;">User Stats</h2>
	<div id="user-stats-chart" style="display:block; width:100%; max-width:900px; margin:0 auto;"></div>

	<!-- <h2 style="width:100%; text-align:center; margin:24px 0 4px;">Game History</h2> -->
	 <h2 style="width:100%; text-align:center; margin:24px 0 4px; font-size:24px; font-weight:700;">Game History</h2>
	<div id="game-history-table" style="display:block; width:100%; max-width:900px; margin:0 auto;"></div>

	<div style="width:100%; text-align:center; margin:24px 0 8px;">
		<button id="dashboard-back" class="button secondary">Back</button>
	</div>
	</div>



	<script type="module" src="./src/core/main.ts"></script>
</body>
</html>